/*! 
 * BuddyBoss Theme JavaScript Library 
 * @package BuddyBoss Theme 
 */
jQuery(function(u){function a(e,i,t,d){var o={action:e,nonce:i};u.each(t,function(e,i){"action"===i.name?o.bbp_reply_form_action=i.value:o[i.name]=i.value});var h=d.closest("#bbpress-forums");u.post(window.bbpReplyAjaxJS.bbp_ajaxurl,o,function(e){if(e.success){h.find(".bbp-reply-form form").removeClass("submitting");var i="";if("edit"===e.reply_type)i='<li class="highlight">'+e.content+"</li>",u("#post-"+e.reply_id).parent("li").replaceWith(i);else if(window.bbpReplyAjaxJS.threaded_reply&&e.reply_parent&&e.reply_parent!==e.reply_id){var t=null,d="1";if(u("#post-"+e.reply_parent).parent("li").data("depth")==window.bbpReplyAjaxJS.threaded_reply_depth){var o=parseInt(window.bbpReplyAjaxJS.threaded_reply_depth)-1;t=u("#post-"+e.reply_parent).closest("li.depth-"+o),d=window.bbpReplyAjaxJS.threaded_reply_depth}else t=u("#post-"+e.reply_parent).parent("li"),d=parseInt(t.data("depth"))+1;var a="ul";h.find(".bb-single-reply-list").is("ol")&&(a="ol"),t.find(">"+a+".bbp-threaded-replies").length||t.append("<"+a+' class="bbp-threaded-replies"></'+a+">"),i='<li class="highlight depth-'+d+'" data-depth="'+d+'">'+e.content+"</li>",t.find(">"+a+".bbp-threaded-replies").append(i)}else i='<li class="highlight depth-1" data-depth="1">'+e.content+"</li>",h.find(".bb-single-reply-list").append(i);if(""!==e.tags){var n=u("body .item-tags"),r=u("body .item-tags ul");"none"===n.css("display")?(n.append(e.tags),n.show()):(r.remove(),n.append(e.tags))}""!=i&&(u("body").animate({scrollTop:u(i).offset().top},500),setTimeout(function(){u(i).removeClass("highlight")},2e3));var p=h.find(".bbp-reply-form form").find("#forums-post-media-uploader").data("key"),s=!1;if("undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media&&void 0!==bp.Nouveau.Media.dropzone_media&&void 0!==bp.Nouveau.Media.dropzone_media[p]&&bp.Nouveau.Media.dropzone_media[p].length){s=!0;for(var l=0;l<bp.Nouveau.Media.dropzone_media[p].length;l++)bp.Nouveau.Media.dropzone_media[p][l].saved=!0}var b=h.find(".bbp-reply-form form").find(".bbp-the-content").data("key");void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[b]&&window.forums_medium_reply_editor[b].resetContent(),h.find(".bbp-reply-form form").find(".bbp-the-content").removeClass("error"),h.find("#bbp-close-btn").trigger("click"),h.find("#bbp_reply_content").val(""),function(e,i,t){if(e.find(".bbp-reply-form form").find("#bbp-template-notices").html(""),"undefined"!=typeof bp&&void 0!==bp.Nouveau&&void 0!==bp.Nouveau.Media){e.find(".gif-media-search-dropdown").removeClass("open"),e.find("#whats-new-toolbar #forums-gif-button").removeClass("active");var d=e.find("#whats-new-attachments .forums-attached-gif-container");d&&(d.addClass("closed"),d.find(".gif-image-container img").attr("src",""),d[0].style=""),e.find("#bbp_media_gif").length&&e.find("#bbp_media_gif").val(""),void 0!==i&&t&&(void 0!==bp.Nouveau.Media.dropzone_obj[i]&&(bp.Nouveau.Media.dropzone_obj[i].destroy(),bp.Nouveau.Media.dropzone_obj.splice(i,1),bp.Nouveau.Media.dropzone_media.splice(i,1)),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').html(""),e.find('div#forums-post-media-uploader[data-key="'+i+'"]').addClass("closed").removeClass("open"))}}(h,p,s);var f=h.find(".scrubberpost");for(var m in f)if(u(f[m]).hasClass("post-"+e.reply_id)){window.BuddyBossThemeBbpScrubber.goToPost(parseInt(m,10)+1,"");break}}else void 0!==e.content&&h.find(".bbp-reply-form form").find("#bbp-template-notices").html(e.content);h.find(".bbp-reply-form form").removeClass("submitting")})}u("body").hasClass("reply-edit")||u(".bbp-reply-form form").on("submit",function(e){if(e.preventDefault(),u(this).hasClass("submitting"))return!1;u(this).addClass("submitting");var i=!0,t=!0,d=u(e.target).find(".bbp-the-content").data("key"),o=!1;void 0!==window.forums_medium_reply_editor&&void 0!==window.forums_medium_reply_editor[d]&&(o=window.forums_medium_reply_editor[d]),(0<u(this).find("#bbp_media").length&&0<u(this).find("#bbp_media_gif").length&&""==u(this).find("#bbp_media").val()&&""==u(this).find("#bbp_media_gif").val()||0<u(this).find("#bbp_media").length&&u(this).find("#bbp_media_gif").length<=0&&""==u(this).find("#bbp_media").val()||0<u(this).find("#bbp_media_gif").length&&u(this).find("#bbp_media").length<=0&&""==u(this).find("#bbp_media_gif").val())&&(t=!1),o&&""===u.trim(o.getContent().replace("<p><br></p>",""))&&0==t?(u(this).find(".bbp-the-content").addClass("error"),i=!1):o||""!==u.trim(u(this).find("#bbp_reply_content").val())||0!=t?(o&&u(this).find(".bbp-the-content").removeClass("error"),u(this).find("#bbp_reply_content").removeClass("error")):(u(this).find("#bbp_reply_content").addClass("error"),i=!1),i?a("reply",window.bbpReplyAjaxJS.reply_nonce,u(this).serializeArray(),u(this)):u(this).removeClass("submitting")})});